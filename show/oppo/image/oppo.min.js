function isMobile(){return/(ipad|iphone|ipod|android)/.test(navigator.userAgent.toLowerCase())}function feedback(){document.querySelector(".fly-feedback")&&(document.querySelector(".fly-feedback").style.display="block");var e=!1;$("#overlay-feedback").size()||$("body").append($('<div id="overlay-feedback" />'));$("#overlay-feedback");$("#feedback-button").on("touchstart",function(n){e=!e,$(this).parent().find(".feedback-tooltip")[e?"addClass":"removeClass"]("feedback-active"),$("#overlay-feedback").css("display",e?"block":"none"),$("html")[e?"addClass":"removeClass"]("feedback-opened"),n.preventDefault()}),$("#overlay-feedback").on("touchstart",function(n){$(".fly-feedback").find(".feedback-tooltip")[e?"removeClass":"addClass"]("feedback-active"),$("#overlay-feedback").css("display",e?"none":"block"),$("html")[e?"removeClass":"addClass"]("feedback-opened"),e=!1,n.preventDefault()})}!function(){var e=$("[data-trigger]");e.click(function(){var n=e.data("trigger");$("#"+n).click()})}();var OPPO={utils:{},conf:{},controller:{},lang:{must_be_integer:"请输入数字"}};OPPO.controller.AboutController=function(){var e=function(e){return 11===e.length&&!isNaN(e)&&"1"===e.substring(0,1)},n=OPPO.utils.isEmail,i=13,t=function(e,n,t){var a=new BMap.Geocoder;a.getPoint(t,function(a){if(a){var o={width:80,height:50,title:n,message:t},s=new BMap.Marker(a),r=new BMap.InfoWindow("地址："+t,o);s.addEventListener("click",function(){e.openInfoWindow(r,a)}),e.addOverlay(s),e.centerAndZoom(a,i)}})},a=function(e){var n=new BMap.NavigationControl({anchor:BMAP_ANCHOR_TOP_LEFT,type:BMAP_NAVIGATION_CONTROL_LARGE,enableGeolocation:!0});e.addControl(n)},o=function(){$("#refreshCaptcha").find("img").attr("src","").attr("src",OPPO.conf.BASE_URL+"/captcha?"+Math.random())},s=function(e){e&&($(".badge-mobile").removeClass("opened").find(".badge-icon-tip").hide(),$(".badge-mobile").find("input[name=captcha]").val(""),$(".badge-mobile").find("input[name=mobile]").val(""),l("")),o()},r=function(){var e=$(".badge-mobile").find("input[name=captcha]").val(),n=$(".badge-mobile").find("input[name=mobile]").val();return e=$.trim(e),n=$.trim(n),""==n?"请填写完整信息。":OPPO.utils.isMobile(n)?""==e?"请填写完整信息。":!0:"手机号码格式不正确。"},l=function(e){$("#sendMsg").find(".sendMessageError").html(e)},c=function(){$(".badge-mobile").click(function(){return $(this).hasClass("opened")?!1:($(this).addClass("opened").find(".badge-icon-tip").show(),void 0)}),$(".badge-icon-tip-close").click(function(){return s(!0),!1}),$("#sendMsg button").click(function(){var e=r();if(1!=e)return l(e),!1;var n=$("#sendMsg").serializeArray(),i=$("#sendMsg").attr("action");return $.ajax({url:i,data:n,type:"get",success:function(e){"1"==e.status?s(!0):(l(e.message),s(!1))},error:function(){l("发送失败，请重试"),s(!1)}}),!1})},d=$('input[name="name"]'),p=$('input[name="email"]'),f=$('input[name="mobile"]'),h=$('textarea[name="content"]'),u=$(".error_msg_note");return{index:function(){c();var i=function(){u.prev("p").hide()};return d.focus(function(){i()}),p.focus(function(){i()}),f.focus(function(){i()}),h.focus(function(){i()}),{initMap:function(e,n,i){var o=new BMap.Map("map");t(o,n,i),a(o)},refreshCaptcha:function(){o()},contactValidate:function(){var t=$.trim(d.val()),a=$.trim(p.val()),o=$.trim(f.val()),s=$.trim(h.val());return i(),u.html(""),t?a?n(a)?o?e(o)?s?!0:(h.focus(),u.html("请填写完整信息。"),!1):(f.focus(),u.html("手机号码格式不正确。"),!1):(f.focus(),u.html("请填写完整信息。"),!1):(p.focus(),u.html("邮箱格式不正确。"),!1):(p.focus(),u.html("请填写完整信息。"),!1):(d.focus(),u.html("请填写完整信息。"),!1)}}}}},OPPO.controller.BlogsController=function(){var e=function(){if($("body").on("mouseenter",".info-share",function(){return $(this).hasClass("active")?!1:($(this).find("span").addClass("active"),void 0)}),$("body").on("mouseleave",".info-share",function(){return $(this).hasClass("active")?!1:($(this).find("span").removeClass("active"),void 0)}),$("body").on("click",".info-zan",function(){if($(this).hasClass("active"))return!1;var e=$(this),n=$(this).data("zan");$.get("/cn/blogs/praise/"+n,function(n){e.addClass("active").find(".icon-zan").addClass("active"),e.parent().find(".pcount").html(n.data)})}),$("body").on("click",".info-share",function(){var e=$(this).parent().parent();if($(this).hasClass("active"))$(this).removeClass("active"),e.find(".icon-wx").css("display","none"),e.find(".icon-wb").css("display","none"),e.find(".icon-qq").css("display","none");else{$(this).addClass("active"),$(this).find("span").addClass("active"),e.find(".icon-wx").css("display","inline-block"),e.find(".icon-wb").css("display","inline-block"),e.find(".icon-qq").css("display","inline-block");var t=$(this).parents(".blog-thumb");if(t.hasClass("blog-show"))var a=window.location.href,o={url:a,title:t.find(".title").text()};else var a=t.find(".title a").attr("href"),o={url:a,title:t.find(".title a").text(),pic:t.find(".image img").attr("src")};e.find(".panel-wx").hasClass("push-qrcode")||e.find(".panel-wx").addClass("push-qrcode").qrcode({render:"table",width:100,height:100,text:a}),e.find(".info-wx").hover(function(){e.find(".panel-wx").show()},function(){e.find(".panel-wx").hide()}),e.find(".info-wb").click(function(){n(o)}),e.find(".info-qq").click(function(){i(o)})}return!1}),$("body").on("mouseenter",".choice a",function(){$(this).parent().find(".choice-mask").addClass("hover")}),$("body").on("mouseleave",".choice a",function(){$(this).parent().find(".choice-mask").removeClass("hover")}),$(".blog-hot-list a").length>0){var e=$(".blog-hot-list a").eq(0);e.addClass("hover").find("img").show()}$(".blog-hot-list a").hover(function(){return $(this).hasClass("hover")?!1:($(".blog-hot-list").find("a.hover").removeClass("hover").find("img").hide(),$(this).addClass("hover").find("img").show(),void 0)})},n=function(e){var n={title:"",pic:"",url:""};$.extend(n,e);var i="http://v.t.sina.com.cn/share/share.php?";i+="appkey=1710173801&ralateUid=1710173801&url="+n.url+"&pic="+n.pic+"&title="+encodeURIComponent(n.title),window.open(i,"","width=700, height=480, top=0, left=0, toolbar=no, menubar=no, scrollbars=no, location=yes, resizable=no, status=no")},i=function(e){var n={title:"",pic:"",url:""};$.extend(n,e);var i="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?summary="+n.title+"&url="+n.url+"&pics="+n.pic;window.open(i,"newwindow","height=700,width=480,top=100,left=100")},t=function(){var e=$(".blog-thumb"),t=e.find(".title").html(),a=window.location.href;e.find(".share a").hover(function(){$(this).find(".blog-icon").addClass("active")},function(){$(this).find(".blog-icon").removeClass("active")}),$(".show-share-wx").hover(function(){$(this).find(".panel-wx").hasClass("push-qrcode")||$(this).find(".panel-wx").addClass("push-qrcode").qrcode({render:"table",width:100,height:100,text:a}),$(this).find(".panel-wx").show()},function(){$(this).find(".panel-wx").hide()}),$(".show-share-wb").click(function(){return n({title:t,url:a}),!1}),$(".show-share-qq").click(function(){return i({title:t,url:a}),!1})},a=navigator.userAgent.search(/(iPhone|iPod|iPad|Android|BlackBerry|BB10|Windows Phone|Tizen|Bada)/),o=function(e,n){$.get("/cn/blogs/video/"+e,function(e){if(1!=e.status)return!1;var i=e.data.blog.content;~a?$(n).find(".play-iframe").html(i):($("#dialog-video").find(".dialog-video-content").html(i),$("#dialog-video").removeClass("hidden"))});$("#dialog-video .dialog-video-close a").click(function(){$("#dialog-video").find(".dialog-video-content").html(""),$("#dialog-video").addClass("hidden")})},s=function(){$("body").on("mouseenter",".blog-video .image a",function(){$(this).find(".play-mask").fadeIn(300),$(this).find(".play-icon").fadeIn(300)}),$("body").on("mouseleave",".blog-video .image a",function(){$(this).find(".play-mask").hide(),$(this).find(".play-icon").hide()})},r=2,l=!0,c=function(){l=!1;var e=window.location.search,n=window.location.href;n=e.length<=0?window.location.href+"?ajax_page="+r:window.location.href+"&ajax_page="+r,$(".page_ajax_loading").fadeIn(300,function(){$.get(n,function(e){if($(".page_ajax_loading").fadeOut(300),e.data.length<=0)return!1;var n=$(".blog-thumb").eq(0),i=window.location.pathname,t="";$.each(e.data,function(e,a){var o=n.clone();t=a.tagg;var s="";"官方新闻"==t?s="tag-news":"粉丝互动"==t?s="tag-fans":"手机测评"==t&&(s="tag-test");var r=i+"/"+a.id+"?group_name="+encodeURIComponent(a.tagg),l=a.created_at;l=l.substr(0,10),o.find(".title a").attr("href",r).html(a.title),o.find(".info-tag").html('<a href="http://dev.www.oppo.com/cn/blogs?group_name='+encodeURIComponent(a.tagg)+'" class="tag '+s+'">'+a.tagg+"</a>"+l+" by "+(a.third_author?a.third_author:"OPPO 官网")),o.find(".info-icon").find("li").eq(0).html("<span class='blog-icon icon-view'></span>"+a.read_count),o.find(".info-zan").data("zan",a.id).parent().find(".pcount").html(a.praise_count),o.find(".info-wb").data("tj","www|link|blog|wb-"+a.id),o.find(".info-qq").data("tj","www|link|blog|qq-"+a.id),o.find(".info-share").data("tj","www|link|blog|share-"+a.id),o.find(".image a").attr("href",r).find("img").attr("src",a.big_img_thumb?a.big_img_thumb:""),a.introduction||(a.introduction=""),o.find(".text").html('<a href="'+r+'"  target="_blank">'+a.introduction+"</a>"),o.find(".more a").attr("href",r),$(".blog-list").append(o)}),~a||$("ul.pagination").find("li").removeClass("active").eq(r).addClass("active"),p(r,i+"?group_name="+encodeURIComponent(groupName)+"&"),r++,l=!0,r>3&&(l=!1,a&&$(".page_pagination").find(".text-center").show().find("li").removeClass("active").eq(3).addClass("active"),$(".page_ajax_more").hide())})})},d=function(){l=!1;var e=window.location.search,n=window.location.href;n=e.length<=0?window.location.href+"?ajax_page="+r:window.location.href+"&ajax_page="+r,$(".page_ajax_loading").fadeIn(300,function(){$.get(n,function(e){if($(".page_ajax_loading").fadeOut(300),e.data.length<=0)return!1;var n=$(".blog-video").eq(0).parent(),i=$(".blog-video").eq(0).parent().parent();$.each(e.data,function(e,t){var a=n.clone(),o=(window.location.pathname,t.created_at);o=o.substr(0,10),a.find(".info .gi").eq(0).html(t.title),a.find("ul li").eq(0).html("<span class='blog-icon icon-view'></span> "+t.read_count),a.find("ul li").eq(1).html("<a href='javascript:;' class='info-zan' data-zan='"+t.id+"'><span class='blog-icon icon-zan'></span></a><span class='pcount'>"+t.praise_count+"</span>"),a.find(".image").html("<a href='javascript:;' onclick='vm.playVideo("+t.id+", this)' ><img src='"+t.img_thumb+"' /><span class='play-mask'></span><span class='blog-icon play-icon'></span><span class='play-iframe'></span>"),t.recommend_product||(t.recommend_product=""),a.find(".other").html(o+"<a href='"+t.details_url+"' target='_black' class='oppo-tj' data-tj='www|link|blog|recomend-"+t.id+"'>"+t.recommend_product+"</a>"),i.append(a)}),~a||$("ul.pagination").find("li").removeClass("active").eq(r).addClass("active"),p(r,window.location.href+"?"),r++,l=!0,r>3&&(l=!1,a&&$(".page_pagination").find(".text-center").show().find("li").removeClass("active").eq(3).addClass("active"),$(".page_ajax_more").hide())})})},p=function(e,n){var i=$(".pagination").find("li").length;$(".pagination").find("li").eq(0).removeClass("disabled").html('<a href="'+n+"page="+(e-1)+'">«</a>'),$(".pagination").find("li").eq(1).html('<a href="'+n+'page=1">1</a>'),i!=e+2?$(".pagination").find("li").eq(i-1).html('<a href="'+n+"page="+(e+1)+'">»</a>'):$(".pagination").find("li").eq(i-1).html("<span>»</span>").addClass("disabled")},f=function(){~a?$(".page_ajax_more").click(function(){3>=r&&l&&c()}):$(window).scroll(function(){{var e=$(window).scrollTop(),n=$(window).height(),i=$(document).height(),t=$(".blog-asides").offset().top+$(".blog-asides").height(),a=$(".blog-asides").offset().left,o=$(".blog-asides").width();$(".footer-prominent-area").offset().top}if(e>=t&&i-n>e)if(""==$("#blog-aside-fixed").html()){var s=$(".blog-asides").clone();s.find(".blog-aside-hot").hide(),s.find(".blog-aside-category").removeClass("blog-aside-category"),$("#blog-aside-fixed").html(s).css({left:a+30+"px",width:o+"px"}),$("#blog-aside-fixed").slideDown(300)}else $("#blog-aside-fixed").slideDown(300);else $("#blog-aside-fixed").fadeOut(300);if($(".page_pagination").hasClass("page_first")){var d=$(".page_pagination").offset().top-$(window).height()/2;e>d&&3>=r&&l&&c()}})},h=function(){~a?$(".page_ajax_more").click(function(){3>=r&&l&&d()}):$(window).scroll(function(){{var e=$(window).scrollTop();$(window).height(),$(document).height()}if($(".page_pagination").hasClass("page_first")){var n=$(".page_pagination").offset().top-$(window).height()/2;e>n&&3>=r&&l&&d()}})},u=function(){$(".history-date").append("<span class='dashed'></span><span class='circle'></span>")};return{index:function(){return e(),f(),{}},show:function(){return e(),t(),f(),{}},video:function(){return e(),s(),h(),{playVideo:function(e,n){o(e,n)}}},about:function(){return u(),{}}}},$(function(){$.each($(".lt-ie9 input[type=text],.lt-ie9 textarea"),function(e,n){var i=$(n).attr("placeholder"),t=$(n).val();return"undefined"==typeof i||""==i||""!=t?!1:($(n).val(i),$(n).on("focus",function(){var e=$(this).val();e==i&&$(this).val("")}),$(n).on("blur",function(){var e=$(this).val();""==e&&$(this).val(i)}),void 0)}),$("#home-media-weibo").length>0&&$(window).scroll(function(){var e=$(window).scrollTop(),n=$("#home-media-weibo").offset().top,i=$("#home-media-weibo").html();e>n-500&&""==i&&$("#home-media-weibo").html('<iframe width="100%" height="370" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=100%&height=370&fansRow=2&ptype=1&speed=0&skin=1&isTitle=1&noborder=1&isWeibo=1&isFans=0&uid=1710173801&verifier=43ce7f75&dpc=1"></iframe>')})}),$(function(){$("#footer-wx").hover(function(){$(this).find(".wx-float").show()},function(){$(this).find(".wx-float").hide()}),$("body").on("click","#footer-wx",function(){return!1}),$("body").on("mouseenter","#btn-qr",function(){$("#qr-code").show()}),$("body").on("mouseleave","#btn-qr",function(){$("#qr-code").hide()}),$("body").on("click",".footer-sitemap .js-toggle-sitemap",function(){return $(this).hasClass("active")?$(this).removeClass("active").parent().find("ul").hide():($(".footer-sitemap .js-toggle-sitemap").each(function(){$(this).hasClass("active")&&$(this).removeClass("active").parent().find("ul").hide()}),$(this).addClass("active").parent().find("ul").show()),!1}),isMobile()&&feedback()}),OPPO.controller.ProductsController=function(){var e=function(){$(function(){$(".tabs-mobile li").on("click",function(e){if(e.preventDefault(),!$(this).hasClass("active")){$(".tabs-mobile li").removeClass("active"),$(this).addClass("active");var n=$(this).index()+1;$("body,html").animate({scrollTop:$("#serial-"+n).offset().top-50},200)}}),$(window).load(function(){var e=$(".tabs-mobile").offset().top;$(window).scroll(function(){var n=$(window).scrollTop(),i=$("#serial-1").offset().top-50,t=$("#serial-2").offset().top-150,a=$("#serial-3").offset().top-150,o=$("#serial-4").offset().top-150,s=$(".oppo-feature").offset().top-150;n>=e?($(".tabs-blank").height(50),$(".tabs-mobile").addClass("active")):($(".tabs-blank").height(0),$(".tabs-mobile").removeClass("active")),i>n||n>s?$(".tabs-mobile li").removeClass("active"):n>=i&&t>n?($(".tabs-mobile li").removeClass("active"),$("#tab-1").addClass("active")):n>=t&&a>n?($(".tabs-mobile li").removeClass("active"),$("#tab-2").addClass("active")):n>=a&&o>n?($(".tabs-mobile li").removeClass("active"),$("#tab-3").addClass("active")):n>=o&&($(".tabs-mobile li").removeClass("active"),$("#tab-4").addClass("active"))})})})};return{index:function(){e()}}},OPPO.controller.ShopsController=function(){var e=11,n=[],i=!1,t=0,a=1,o=function(i,t,o){var s=(new BMap.Geocoder,new RegExp(/(.*市)\1/)),r=t.address.replace(s,"$1"),l=new BMap.Point(t.longitude,t.latitude);if(l.id=t.id,n.push(l),a++,l){var c=null;if("undefined"!=typeof t.shop_images){var d=t.shop_images;if(d.length>0){var p=d[0];"undefined"!=typeof p.archive?(p=p.archive.rpath,p='<img src="'+p+'" alt="" style="float:right;zoom:1;overflow:hidden;width:100px;height:100px;margin-left:3px;"/>'):p=""}else var p=""}else var p="";var f='<div style="margin:0;line-height:20px;padding:2px;">'+p+"地址："+r+"<br/>电话："+t.phone_number+"<br/>营业时间："+t.opening_time+"-"+t.closing_time+"</div>";c=new BMapLib.SearchInfoWindow(i,f,{title:t.name,width:320,height:110,panel:"panel",enableAutoPan:!0,enableSendToPhone:!1,searchTypes:[BMAPLIB_TAB_SEARCH,BMAPLIB_TAB_TO_HERE,BMAPLIB_TAB_FROM_HERE]});var h=new BMap.Marker(l);h.addEventListener("click",function(){c.open(h)}),i.addOverlay(h),o&&i.centerAndZoom(l,e+3)}},s=function(e){var n=new BMap.NavigationControl({anchor:BMAP_ANCHOR_TOP_LEFT,type:BMAP_NAVIGATION_CONTROL_LARGE,enableGeolocation:!0});e.addControl(n)},r=$("#select_cities_shops"),l=r.find("select[name=province_id]"),c=r.find("select[name=city_id]"),d=$(c).val(),p=function(e){$(e).parent().find(".select_label").html("<span>"+$(e).find("option:selected").text()+"</span>")},f=function(e,n){c.html(""),$.each(e,function(e,i){var t=parseInt(i.id,10),a=i.name;0===e&&0===n&&(n=t),t!==parseInt(n)?c.append('<option value="'+t+'">'+a+"</option>"):c.append('<option value="'+t+'" selected>'+a+"</option>"),p(c)})},h=function(e,n,i){l.html(""),$.each(e,function(e,t){var a=t.name,o=t.sub;parseInt(t.id)!==parseInt(n)?l.append('<option value="'+t.id+'">'+a+"</option>"):(l.append('<option value="'+t.id+'" selected>'+a+"</option>"),o.length>0&&f(o,i)),p(l)})},u=function(e,n,i){h(e,n,i),l.on("change",function(){n=parseInt($(this).val()),i=0,h(e,n,i),$(c).val()!=d&&(d=$(c).val(),window.location.href=OPPO.conf.BASE_URL+"/shops?city="+$(c).val())}),c.on("change",function(){i=parseInt($(this).val()),window.location.href=OPPO.conf.BASE_URL+"/shops?city="+i})},v=function(){$("#refreshCaptcha").find("img").attr("src","").attr("src",OPPO.conf.BASE_URL+"/captcha?"+Math.random())},m=function(e){e&&($(".badge-mobile").removeClass("opened").find(".badge-icon-tip").hide(),$(".badge-mobile").find("input[name=captcha]").val(""),$(".badge-mobile").find("input[name=mobile]").val(""),b("")),v()},g=function(){var e=$(".badge-mobile").find("input[name=captcha]").val(),n=$(".badge-mobile").find("input[name=mobile]").val();return e=$.trim(e),n=$.trim(n),""==n?"请填写完整信息。":OPPO.utils.isMobile(n)?""==e?"请填写完整信息。":!0:"手机号码格式不正确。"},b=function(e){$("#sendMsg").find(".sendMessageError").html(e)},w=function(){$(".badge-mobile").click(function(){return $(this).hasClass("opened")?!1:($(this).addClass("opened").find(".badge-icon-tip").show(),void 0)}),$(".badge-icon-tip-close").click(function(){return m(!0),!1}),$("#sendMsg button").click(function(){var e=g();if(1!=e)return b(e),!1;var n=$("#sendMsg").serializeArray(),i=$("#sendMsg").attr("action");return $.ajax({url:i,data:n,type:"get",success:function(e){"1"==e.status?m(!0):(b(e.message),m(!1))},error:function(){b("发送失败，请重试"),m(!1)}}),!1})},C=[],y=function(e){var n="",i="";switch(e){case 0:i="diediephone.json";break;case 1:i="miemiephone.json"}return""==i?!1:($.getJSON(OPPO.conf.BASE_URL+"/lib/"+i+"?"+Math.random(),function(e){if(!e.length>0)return!1;$.each(e,function(e,i){var t=$.inArray(i.city,C);0>t&&(t=e,C[t]=i.city),n+="<li class='store-location js-collapse cityIndex-"+t+"'>",n+="<span class='marker'>"+(e+1)+"</span>",n+="<div class='store-location-info g'>",n+="<div class='gi lap-one-third store-name'>",n+="<p><strong>"+i.shopname+"</strong></p>",i.shopid>0&&(n+="<p><a class='view-details' href='"+OPPO.conf.BASE_URL+"/shops/"+i.shopid+"'>查看详情</a></p>"),n+="</div>",n+="<div class='gi lap-one-third'>",n+="<p>"+i.address+"</p>",n+="</div>",n+="<div class='gi lap-one-third'>",n+="<p>"+i.phone+"</p>",n+="</div>",n+="</div>",n+="</li>"}),$("#r7shops").html(n);var i="<select>";i+='<option value="" >选择城市</option>';for(var t in C)C.hasOwnProperty(t)&&(i+='<option value="'+t+'">'+C[t]+"</option>");i+="</select>",$("#citys").html(i),$("#citys select").on("change",function(){var e=$(this).val();return""==e?$("#r7shops").find("li").show():($("#r7shops").find("li:not(.cityIndex-"+e+")").hide(),$("#r7shops").find("li.cityIndex-"+e).show()),!1})}),void 0)},P=function(){var e="";$.getJSON(OPPO.conf.BASE_URL+"/lib/r7plusbarca.json?1433294837",function(n){if(!n.length>0)return!1;$.each(n,function(n,i){var t=$.inArray(i.city,C);0>t&&(t=n,C[t]=i.city),e+="<li class='store-location js-collapse cityIndex-"+t+"'>",e+="<span class='marker'>"+(n+1)+"</span>",e+="<div class='store-location-info g'>",e+="<div class='gi lap-one-third store-name'>",e+="<p><strong>"+i.shopname+"</strong></p>",e+="<p><a class='view-details' href='"+OPPO.conf.BASE_URL+"/shops/"+i.shopid+"'>查看详情</a></p>",e+="</div>",e+="<div class='gi lap-one-third'>",e+="<p>"+i.address+"</p>",e+="</div>",e+="<div class='gi lap-one-third'>",e+="<p>"+i.phone+"</p>",e+="</div>",e+="</div>",e+="</li>"}),$("#r7shops").html(e);var i="<select>";i+='<option value="" >选择城市</option>';for(var t in C)C.hasOwnProperty(t)&&(i+='<option value="'+t+'">'+C[t]+"</option>");i+="</select>",$("#citys").html(i),$("#citys select").on("change",function(){var e=$(this).val();return""==e?$("#r7shops").find("li").show():($("#r7shops").find("li:not(.cityIndex-"+e+")").hide(),$("#r7shops").find("li.cityIndex-"+e).show()),!1})})};return{index:function(){return{initMap:function(n,a){var r=new BMap.Map("shop_map");i=r,r.centerAndZoom(n,e),$("#shop_map").hover(function(){r.enableScrollWheelZoom(),r.enableContinuousZoom()},function(){r.disableScrollWheelZoom(),r.disableContinuousZoom()}),s(r),t=a.length,t>0&&_.each(a,function(e){o(r,e)})},initCities:function(e,n){"object"==typeof arrCity&&u(arrCity,e,n)},collapseCities:function(e){$icon=$(e).find(".icon"),$icon.hasClass("icon-green-arrow-down")?$icon.removeClass("icon-green-arrow-down").addClass("icon-green-arrow-up"):$icon.hasClass("icon-green-arrow-up")&&$icon.removeClass("icon-green-arrow-up").addClass("icon-green-arrow-down")}}},show:function(){return w(),{initMap:function(e,n){var i=new BMap.Map("shop_map");$("#shop_map").hover(function(){i.enableScrollWheelZoom(),i.enableContinuousZoom()},function(){i.disableScrollWheelZoom(),i.disableContinuousZoom()}),s(i),o(i,n,!0)},refreshCaptcha:function(){v()}}},diediephone:function(){return y(0),{}},miemiephone:function(){return y(1),{}},r7plus_barca:function(){return P(),{}}}},OPPO.controller.SupportsController=function(){var e=$(".supports-part .button-query"),n=$(".supports-part select[name=mobile]"),i=$(".error_msg_note"),t=11,a=[],o=!1,s=0,r=1,l=!1,c=function(e,n,i){var o=(new BMap.Geocoder,n.province.name+n.address),s=n.coordinate;s=s.split(",");var l=new BMap.Point(s[0],s[1]);if(l.id=n.id,a.push(l),r++,l){var c=null;if("undefined"!=typeof n.shop_images){var d=n.shop_images;if(d.length>0){var p=d[0];"undefined"!=typeof p.archive?(p=p.archive.rpath,p='<img src="'+p+'" alt="" style="float:right;zoom:1;overflow:hidden;width:100px;height:100px;margin-left:3px;"/>'):p=""}else var p=""}else var p="";var f='<div style="margin:0;line-height:20px;padding:2px;">'+p+"地址："+o+"<br/>电话："+n.phone_number+"<br/>营业时间："+n.worktime+"</div>";c=new BMapLib.SearchInfoWindow(e,f,{title:n.name,width:320,height:110,panel:"panel",enableAutoPan:!0,enableSendToPhone:!1,searchTypes:[BMAPLIB_TAB_SEARCH,BMAPLIB_TAB_TO_HERE,BMAPLIB_TAB_FROM_HERE]});var h=new BMap.Marker(l);h.addEventListener("click",function(){c.open(h)}),e.addOverlay(h),i&&e.centerAndZoom(l,t+3)}},d=function(e){var n=new BMap.NavigationControl({anchor:BMAP_ANCHOR_TOP_LEFT,type:BMAP_NAVIGATION_CONTROL_LARGE,enableGeolocation:!0});e.addControl(n)},p=$("#select-territories"),f=p.find("select[name=province_id]"),h=p.find("select[name=city_id]"),u=$(h).val(),v=function(e){$(e).parent().find(".select_label").html("<span>"+$(e).find("option:selected").text()+"</span>")},m=function(e,n){h.html(""),$.each(e,function(e,i){var t=parseInt(i.id,10),a=i.name;0===e&&0===n&&(n=t),t!==parseInt(n)?h.append('<option value="'+t+'">'+a+"</option>"):h.append('<option value="'+t+'" selected>'+a+"</option>"),v(h)})},g=function(e,n,i){f.html(""),$.each(e,function(e,t){var a=t.name,o=t.sub;parseInt(t.id)!==parseInt(n)?f.append('<option value="'+t.id+'">'+a+"</option>"):(f.append('<option value="'+t.id+'" selected>'+a+"</option>"),o.length>0&&m(o,i)),v(f)})},b=function(e,n,i){var t=new RegExp("(^|&)isweixin=([^&]*)(&|$)"),a=window.location.search.substr(1).match(t);g(e,n,i);var o=null!=a&&1==a[2]?1:0;f.on("change",function(){n=parseInt($(this).val()),i=0,g(e,n,i),$(h).val()!=u&&(u=$(h).val(),window.location.href=OPPO.conf.BASE_URL+"/service/map?isweixin="+o+"&city="+$(h).val())}),h.on("change",function(){i=parseInt($(this).val()),window.location.href=OPPO.conf.BASE_URL+"/service/map?isweixin="+o+"&city="+i})},w=function(){$(l).find(".refreshCaptcha").find("img").attr("src","").attr("src",OPPO.conf.BASE_URL+"/captcha?"+Math.random())},C=function(e){e&&($(l).find(".network-send-message").removeClass("opened"),$(l).find(".badge-icon-tip").hide(),$(l).find("input[name=captcha]").val(""),$(l).find("input[name=mobile]").val(""),P("")),w()},y=function(){var e=$(l).find("input[name=captcha]").val(),n=$(l).find("input[name=mobile]").val();return e=$.trim(e),n=$.trim(n),""===n?"请填写完整信息。":OPPO.utils.isMobile(n)?""==e?"请填写完整信息。":!0:"手机号码格式不正确。"},P=function(e){$(l).find(".sendMessageError").html(e)},x=function(){$(".network-send-message").click(function(){return l=$(this).parent().parent(),$(this).hasClass("opened")?!1:(w(),$(this).addClass("opened").parent().parent().find(".badge-icon-tip").show(),void 0)}),$(".badge-icon-tip-close").click(function(){return C(!0),!1}),$(".sendMsg button").click(function(){var e=y();if(1!=e)return P(e),!1;var n=$(l).find(".sendMsg").serializeArray(),i=$(l).find(".sendMsg").attr("action");return $.ajax({url:i,data:n,type:"get",success:function(e){"1"==e.status?C(!0):(P(e.message),C(!1))},error:function(){P("发送失败，请重试"),C(!1)}}),!1})},k=function(e){if(point=a[e]){var n=null,i='<div style="margin:0;line-height:20px;padding:2px;">地址：'+point.address+"<br/>电话："+point.phone_number+"<br/>营业时间："+point.worktime+"</div>";n=new BMapLib.SearchInfoWindow(o,i,{title:point.name,width:320,height:110,panel:"panel",enableAutoPan:!0,enableSendToPhone:!1,searchTypes:[BMAPLIB_TAB_SEARCH,BMAPLIB_TAB_TO_HERE,BMAPLIB_TAB_FROM_HERE]});var t=new BMap.Marker(point);$("body,html").animate({scrollTop:$("#network-map").offset().top},500),n.open(t)}};$(".series").on("click",function(e){if(e.preventDefault(),$(".series-products").hide(),$(this).hasClass("active"))return $(this).removeClass("active"),!1;$(".series").removeClass("active"),$(this).addClass("active");var n=$(this).attr("index")-1;$(".series-products:eq("+n+")").show();var i=5,t=$(window).width();750>=t?i=2:t>750&&990>=t&&(i=3),$(".series-products:eq("+n+")").slick({adaptiveHeight:!0,infinite:!0,slidesToShow:i,slidesToScroll:i,prevArrow:"<span class='products-icon products-icon-prev'><i class='icon icon-prev'></i></span>",nextArrow:"<span class='products-icon products-icon-next'><i class='icon icon-next'></i></span>"})});var O=function(){$(".faqs-action a").off().on("click",function(e){e.preventDefault();var n=$(this),i=OPPO.conf.BASE_URL+"/service/praise/"+n.data("faq-id"),t={type:n.data("faq-type")};$.get(i,t,function(e){return e?(parseInt(e.status)>0&&n.find("span:eq(1)").html("("+e.data+")"),void 0):!1})})},M=function(){$(".pro-imgs").slick({adaptiveHeight:!0,infinite:!0,slidesToShow:1,slidesToScroll:1,prevArrow:"<span class='products-icon products-icon-prev'><i class='icon icon-prev'></i></span>",nextArrow:"<span class='products-icon products-icon-next'><i class='icon icon-next'></i></span>"});var e=$(".supports-vedio a");e.on("click",function(n){n.preventDefault(),e.removeClass("active");var i=parseInt(100*Math.random()),t=$(this);t.addClass("active");var a='<div class="field"><h4>'+t.find("p").text()+"</h4></div>";a+='<iframe width="100%" min-width="260" id="vedio-play-'+i+'" src="'+t.data("src")+'" frameborder="0" allowfullscreen="true"></iframe>';var o=t.parent().siblings(".vedio-play-area");o.html(a),document.getElementById("vedio-play-"+i).style.height=.7*document.getElementById("vedio-play-"+i).scrollWidth+"px"})};return{index:function(){return{}},network:function(){return x(),{initCities:function(e,n){"object"==typeof arrCity&&b(arrCity,e,n)},initMap:function(e,n){var i=new BMap.Map("network-map");o=i,i.centerAndZoom(e,t),$("#network-map").hover(function(){i.enableScrollWheelZoom(),i.enableContinuousZoom()},function(){i.disableScrollWheelZoom(),i.disableContinuousZoom()}),d(i),s=n.length,s>0&&_.each(n,function(e){c(i,e)})},refreshCaptcha:function(){w()},setNetworkToMap:function(e){k(e)}}},partIndex:function(){return e.on("click",function(e){e.preventDefault();var t=n.val();if("0"===t)return i.html("请选择手机类型。"),!1;i.html("");var a=OPPO.conf.BASE_URL+"/productlist",o={mobile:t};$.get(a,o,function(e){if(!e)return!1;if(e=$.parseJSON(e),e.message){e.message=$.parseJSON(e.message),$(".parts-content").show(),$(".parts-content span").text(t),$(".parts-list").html("");for(var n=0;n<e.message.length;n++){var i='<div class="g">';i+='<div class="gi one-third lap-one-fifth center-text"><img src="'+e.message[n].PICURL+'"/></div>',i+='<div class="gi one-third lap-one-fifth">'+e.message[n].NAME+"</div>",i+='<div class="gi one-third lap-one-fifth"> ￥'+e.message[n].PRICE+"</div></div>",$(".parts-list").append(i)}}})}),{}},productShow:function(){return M(),{}},proAppShow:function(){return M(),{}},phoneCheck:function(){return{checkImei:function(){var e=$.trim($("input[name=imei]").val()),n=$.trim($("input[name=captcha]").val());return e?OPPO.utils.isImei(e)?n?($(".error_msg_note").html(""),void 0):($(".error_msg_note").html("请输入验证码。"),!1):($(".error_msg_note").html("IMEI号格式不正确。"),!1):($(".error_msg_note").html("请输入您的手机IMEI号。"),!1)}}},checkResult:function(){return x(),{}},faq:function(){return O(),{}},faqShow:function(){return O(),{}}}},OPPO.utils.isEmail=function(e){return e.match(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/)},OPPO.utils.isMobile=function(e){return 11===e.length&&!isNaN(e)&&"1"===e.substring(0,1)},OPPO.utils.updateCaptcha=function(){$("#captcha").attr("src",OPPO.conf.BASE_URL+"/captcha?"+Math.random())},OPPO.utils.isImei=function(e){return e.match(/^[0-9]{15}$/)};